#!/usr/bin/env bash

ENTRYFILE=$HOME/"diary"


date=`date "+%d"`
month=`date "+%B"`
year=`date "+%Y"`
day=`date "+%A"`
time=`date "+%l:%M"`
hour=`date "+%l"`
minute=`date "+%M"`
am_pm=`date "+%p" | sed -e 's/AM/a.m./' -e 's/PM/p.m./'`
time_zone=`date "+%Z"`

date_string=`echo "[$date $month $year, $day $hour:$minute $am_pm $time_zone]" | tr -s ' '`

if [ ! -f $ENTRYFILE ]; then
    touch -c $ENTRYFILE
	     
    if [ $? -ne 0 ]; then
	echo "Error Creating file."
	exit 1
    fi

fi

echo >> $ENTRYFILE
echo $date_string >> $ENTRYFILE
echo >> $ENTRYFILE


emacs $ENTRYFILE --eval='(forward-char (point-max))' --eval='(auto-fill-mode)' --eval='(text-mode)'



